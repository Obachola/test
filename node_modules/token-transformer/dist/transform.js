module.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e,r){"use strict";
/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2018, Jon Schlinkert.
 * Released under the MIT License.
 */const n=r(1);function o(t,e,r,n){if(!a(t))return t;let u=n||{};const p=Array.isArray(e);if(!p&&"string"!=typeof e)return t;let c=u.merge;c&&"function"!=typeof c&&(c=Object.assign);const l=(p?e:function(t,e){const r=function(t,e){let r=t;if(void 0===e)return r+"";const n=Object.keys(e);for(let t=0;t<n.length;t++){const o=n[t];r+=";"+o+"="+String(e[o])}return r}(t,e);if(o.memo[r])return o.memo[r];const n=e&&e.separator?e.separator:".";let i=[],s=[];i=e&&"function"==typeof e.split?e.split(t):t.split(n);for(let t=0;t<i.length;t++){let e=i[t];for(;e&&"\\"===e.slice(-1)&&null!=i[t+1];)e=e.slice(0,-1)+n+i[++t];s.push(e)}return o.memo[r]=s,s}(e,u)).filter(s),h=l.length,f=t;if(!n&&1===l.length)return i(t,l[0],r,c),t;for(let e=0;e<h;e++){let n=l[e];if(a(t[n])||(t[n]={}),e===h-1){i(t,n,r,c);break}t=t[n]}return f}function i(t,e,r,o){o&&n(t[e])&&n(r)?t[e]=o({},t[e],r):t[e]=r}function s(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t}function a(t){return null!==t&&("object"==typeof t||"function"==typeof t)}o.memo={},t.exports=o},function(t,e,r){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n=r(2);function o(t){return!0===n(t)&&"[object Object]"===Object.prototype.toString.call(t)}t.exports=function(t){var e,r;return!1!==o(t)&&("function"==typeof(e=t.constructor)&&(!1!==o(r=e.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}},function(t,e,r){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},function(t,e,r){"use strict";r.r(e);var n=function(t,e){var r={};"string"==typeof e&&(e=[].slice.call(arguments,1));for(var n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||-1===e.indexOf(n)&&(r[n]=t[n]);return r};var o=r(0),i=r.n(o);var s;function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){switch(t){case"color":case"colors":return s.COLOR;case"space":case"spacing":return s.SPACING;case"size":case"sizing":return s.SIZING;case"boxShadow":return s.BOX_SHADOW;case"border":return s.BORDER;case"borderRadius":return s.BORDER_RADIUS;case"borderWidth":return s.BORDER_WIDTH;case"opacity":return s.OPACITY;case"fontFamilies":return s.FONT_FAMILIES;case"fontWeights":return s.FONT_WEIGHTS;case"fontSizes":return s.FONT_SIZES;case"lineHeights":return s.LINE_HEIGHTS;case"typography":return s.TYPOGRAPHY;case"letterSpacing":return s.LETTER_SPACING;case"paragraphSpacing":return s.PARAGRAPH_SPACING;default:return s.OTHER}}function l(t){var e=!!t.type&&t.type!==s.UNDEFINED?t.type:c(t.name.split(".").slice(0,1).toString());return u(u({},t),{},{type:e})}function h(t,e,r){return Math.min(Math.max(t,r),e)}!function(t){t.OTHER="other",t.COLOR="color",t.IMPLICIT="implicit",t.BORDER_RADIUS="borderRadius",t.SIZING="sizing",t.SPACING="spacing",t.TEXT="text",t.TYPOGRAPHY="typography",t.OPACITY="opacity",t.BORDER_WIDTH="borderWidth",t.BOX_SHADOW="boxShadow",t.FONT_FAMILIES="fontFamilies",t.FONT_WEIGHTS="fontWeights",t.LINE_HEIGHTS="lineHeights",t.FONT_SIZES="fontSizes",t.LETTER_SPACING="letterSpacing",t.PARAGRAPH_SPACING="paragraphSpacing",t.TEXT_DECORATION="textDecoration",t.TEXT_CASE="textCase",t.BORDER="border",t.UNDEFINED="undefined"}(s||(s={}));class f extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}function y(t){if("string"!=typeof t)throw new f(t);if("transparent"===t.trim().toLowerCase())return[0,0,0,0];let e=t.trim();e=A.test(t)?function(t){const e=t.toLowerCase().trim(),r=b[function(t){let e=5381,r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return(e>>>0)%2341}(e)];if(!r)throw new f(t);return"#"+r}(t):t;const r=g.exec(e);if(r){const t=Array.from(r).slice(1);return[...t.slice(0,3).map(t=>parseInt(d(t,2),16)),parseInt(d(t[3]||"f",2),16)/255]}const n=m.exec(e);if(n){const t=Array.from(n).slice(1);return[...t.slice(0,3).map(t=>parseInt(t,16)),parseInt(t[3]||"ff",16)/255]}const o=O.exec(e);if(o){const t=Array.from(o).slice(1);return[...t.slice(0,3).map(t=>parseInt(t,10)),parseFloat(t[3]||"1")]}const i=w.exec(e);if(i){const[e,r,n,o]=Array.from(i).slice(1).map(parseFloat);if(h(0,100,r)!==r)throw new f(t);if(h(0,100,n)!==n)throw new f(t);return[...E(e,r,n),o||1]}throw new f(t)}const v=t=>parseInt(t.replace(/_/g,""),36),b="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((t,e)=>{const r=v(e.substring(0,3)),n=v(e.substring(3)).toString(16);let o="";for(let t=0;t<6-n.length;t++)o+="0";return t[r]=`${o}${n}`,t},{}),d=(t,e)=>Array.from(Array(e)).map(()=>t).join(""),g=new RegExp(`^#${d("([a-f0-9])",3)}([a-f0-9])?$`,"i"),m=new RegExp(`^#${d("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),O=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${d(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),w=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,A=/^[a-z]+$/i,x=t=>Math.round(255*t),E=(t,e,r)=>{let n=r/100;if(0===e)return[n,n,n].map(x);const o=(t%360+360)%360/60,i=(1-Math.abs(2*n-1))*(e/100),s=i*(1-Math.abs(o%2-1));let a=0,u=0,p=0;o>=0&&o<1?(a=i,u=s):o>=1&&o<2?(a=s,u=i):o>=2&&o<3?(u=i,p=s):o>=3&&o<4?(u=s,p=i):o>=4&&o<5?(a=s,p=i):o>=5&&o<6&&(a=i,p=s);const c=n-i/2;return[a+c,u+c,p+c].map(x)};function S(t){const[e,r,n,o]=y(t);let i=t=>{const e=h(0,255,t).toString(16);return 1===e.length?"0"+e:e};return`#${i(e)}${i(r)}${i(n)}${o<1?i(Math.round(255*o)):""}`}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M(t){try{if("string"!=typeof t)return t;var e=/#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/g,r=t;try{var n=Array.from(r.matchAll(/(rgba?\(.*?\))/g),(function(t){return t[0]})),o=Array.from(r.matchAll(/(hsla?\(.*?\))/g),(function(t){return t[0]}));o.length>0&&o.forEach((function(t){r=r.replace(t,S(t))})),n.length>0&&n.forEach((function(t){var n,o,i,s=t,a=t.replace(/rgba?\(/g,"").replace(")",""),u=a.match(e),p="1";if(u){var c,l,h=_(y(u[0]),3);n=h[0],o=h[1],i=h[2],p=null!==(c=null===(l=a.split(",").pop())||void 0===l?void 0:l.trim())&&void 0!==c?c:"0"}else{var f=_(a.split(",").map((function(t){return t.trim()})),4);n=f[0],o=f[1],i=f[2];var v=f[3];p=void 0===v?"1":v}var b,d,g=(d=(b=p).match(/(\d+%)/))?Number(d[0].slice(0,-1))/100:Number(b);r=r.split(s).join(S("rgba(".concat(n,", ").concat(o,", ").concat(i,", ").concat(g,")")))}))}catch(e){console.log("error",e,t)}return r}catch(t){console.error(t)}return null}var T,k=/(\$[^\s,]+\w)|({([^]*))/g,I=/(\$[^\s,]+\w)|({([^}]*)})/g,P=function(t){return null==t?void 0:t.toString().match(I)};function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t){return!(!t||"object"!==R(t)||!("value"in t)||void 0===t.value)}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t){return"object"===C(t)&&t.type===s.TYPOGRAPHY}function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t){return!!(t&&"object"===F(t)&&"value"in t&&"name"in t)}function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t){return"object"===B(t)&&t.type===s.BOX_SHADOW}!function(t){t.sizing="sizing",t.height="height",t.width="width",t.spacing="spacing",t.verticalPadding="verticalPadding",t.horizontalPadding="horizontalPadding",t.paddingTop="paddingTop",t.paddingRight="paddingRight",t.paddingBottom="paddingBottom",t.paddingLeft="paddingLeft",t.itemSpacing="itemSpacing",t.fill="fill",t.border="border",t.borderRadius="borderRadius",t.borderRadiusTopLeft="borderRadiusTopLeft",t.borderRadiusTopRight="borderRadiusTopRight",t.borderRadiusBottomRight="borderRadiusBottomRight",t.borderRadiusBottomLeft="borderRadiusBottomLeft",t.borderWidth="borderWidth",t.boxShadow="boxShadow",t.opacity="opacity",t.fontFamilies="fontFamilies",t.fontWeights="fontWeights",t.fontSizes="fontSizes",t.lineHeights="lineHeights",t.typography="typography",t.letterSpacing="letterSpacing",t.paragraphSpacing="paragraphSpacing",t.textCase="textCase",t.textDecoration="textDecoration",t.tokenValue="tokenValue",t.value="value",t.tokenName="tokenName",t.description="description"}(T||(T={}));var V="INUMBER",U="IVAR",$="IEXPR";function H(t,e){this.type=t,this.value=null!=e?e:0}function q(t){return new H("IOP1",t)}function G(t){return new H("IOP2",t)}function W(t){return new H("IOP3",t)}function Y(t,e,r){var n,o,i,s,a,u,p=[];if(K(t))return Z(t,r);for(var c=t.length,l=0;l<c;l++){var h=t[l],f=h.type;if(f===V||"IVARNAME"===f)p.push(h.value);else if("IOP2"===f)o=p.pop(),n=p.pop(),"and"===h.value?p.push(!!n&&!!Y(o,e,r)):"or"===h.value?p.push(!!n||!!Y(o,e,r)):"="===h.value?(s=e.binaryOps[h.value],p.push(s(n,Y(o,e,r),r))):(s=e.binaryOps[h.value],p.push(s(Z(n,r),Z(o,r))));else if("IOP3"===f)i=p.pop(),o=p.pop(),n=p.pop(),"?"===h.value?p.push(Y(n?o:i,e,r)):(s=e.ternaryOps[h.value],p.push(s(Z(n,r),Z(o,r),Z(i,r))));else if(f===U)if(h.value in e.functions)p.push(e.functions[h.value]);else if(h.value in e.unaryOps&&e.parser.isOperatorEnabled(h.value))p.push(e.unaryOps[h.value]);else{var y=r[h.value];if(void 0===y)throw new Error("undefined variable: "+h.value);p.push(y)}else if("IOP1"===f)n=p.pop(),s=e.unaryOps[h.value],p.push(s(Z(n,r)));else if("IFUNCALL"===f){for(u=h.value,a=[];u-- >0;)a.unshift(Z(p.pop(),r));if(!(s=p.pop()).apply||!s.call)throw new Error(s+" is not a function");p.push(s.apply(void 0,a))}else if("IFUNDEF"===f)p.push(function(){for(var t=p.pop(),n=[],o=h.value;o-- >0;)n.unshift(p.pop());var i=p.pop(),s=function(){for(var o=Object.assign({},r),i=0,s=n.length;i<s;i++)o[n[i]]=arguments[i];return Y(t,e,o)};return Object.defineProperty(s,"name",{value:i,writable:!1}),r[i]=s,s}());else if(f===$)p.push(X(h,e));else if("IEXPREVAL"===f)p.push(h);else if("IMEMBER"===f)n=p.pop(),p.push(n[h.value]);else if("IENDSTATEMENT"===f)p.pop();else{if("IARRAY"!==f)throw new Error("invalid Expression");for(u=h.value,a=[];u-- >0;)a.unshift(p.pop());p.push(a)}}if(p.length>1)throw new Error("invalid Expression (parity)");return 0===p[0]?0:Z(p[0],r)}function X(t,e,r){return K(t)?t:{type:"IEXPREVAL",value:function(r){return Y(t.value,e,r)}}}function K(t){return t&&"IEXPREVAL"===t.type}function Z(t,e){return K(t)?t.value(e):t}function J(t,e){for(var r,n,o,i,s,a,u=[],p=0;p<t.length;p++){var c=t[p],l=c.type;if(l===V)"number"==typeof c.value&&c.value<0?u.push("("+c.value+")"):Array.isArray(c.value)?u.push("["+c.value.map(Q).join(", ")+"]"):u.push(Q(c.value));else if("IOP2"===l)n=u.pop(),r=u.pop(),i=c.value,e?"^"===i?u.push("Math.pow("+r+", "+n+")"):"and"===i?u.push("(!!"+r+" && !!"+n+")"):"or"===i?u.push("(!!"+r+" || !!"+n+")"):"||"===i?u.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+r+"),("+n+")))"):"=="===i?u.push("("+r+" === "+n+")"):"!="===i?u.push("("+r+" !== "+n+")"):"["===i?u.push(r+"[("+n+") | 0]"):u.push("("+r+" "+i+" "+n+")"):"["===i?u.push(r+"["+n+"]"):u.push("("+r+" "+i+" "+n+")");else if("IOP3"===l){if(o=u.pop(),n=u.pop(),r=u.pop(),"?"!==(i=c.value))throw new Error("invalid Expression");u.push("("+r+" ? "+n+" : "+o+")")}else if(l===U||"IVARNAME"===l)u.push(c.value);else if("IOP1"===l)r=u.pop(),"-"===(i=c.value)||"+"===i?u.push("("+i+r+")"):e?"not"===i?u.push("(!"+r+")"):"!"===i?u.push("fac("+r+")"):u.push(i+"("+r+")"):"!"===i?u.push("("+r+"!)"):u.push("("+i+" "+r+")");else if("IFUNCALL"===l){for(a=c.value,s=[];a-- >0;)s.unshift(u.pop());i=u.pop(),u.push(i+"("+s.join(", ")+")")}else if("IFUNDEF"===l){for(n=u.pop(),a=c.value,s=[];a-- >0;)s.unshift(u.pop());r=u.pop(),e?u.push("("+r+" = function("+s.join(", ")+") { return "+n+" })"):u.push("("+r+"("+s.join(", ")+") = "+n+")")}else if("IMEMBER"===l)r=u.pop(),u.push(r+"."+c.value);else if("IARRAY"===l){for(a=c.value,s=[];a-- >0;)s.unshift(u.pop());u.push("["+s.join(", ")+"]")}else if(l===$)u.push("("+J(c.value,e)+")");else if("IENDSTATEMENT"!==l)throw new Error("invalid Expression")}return u.length>1&&(u=e?[u.join(",")]:[u.join(";")]),String(u[0])}function Q(t){return"string"==typeof t?JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):t}function tt(t,e){for(var r=0;r<t.length;r++)if(t[r]===e)return!0;return!1}function et(t,e,r){for(var n=!!(r=r||{}).withMembers,o=null,i=0;i<t.length;i++){var s=t[i];s.type===U||"IVARNAME"===s.type?n||tt(e,s.value)?null!==o?(tt(e,o)||e.push(o),o=s.value):o=s.value:e.push(s.value):"IMEMBER"===s.type&&n&&null!==o?o+="."+s.value:s.type===$?et(s.value,e,r):null!==o&&(tt(e,o)||e.push(o),o=null)}null===o||tt(e,o)||e.push(o)}function rt(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}H.prototype.toString=function(){switch(this.type){case V:case"IOP1":case"IOP2":case"IOP3":case U:case"IVARNAME":case"IENDSTATEMENT":return this.value;case"IFUNCALL":return"CALL "+this.value;case"IFUNDEF":return"DEF "+this.value;case"IARRAY":return"ARRAY "+this.value;case"IMEMBER":return"."+this.value;default:return"Invalid Instruction"}},rt.prototype.simplify=function(t){return t=t||{},new rt(function t(e,r,n,o,i){for(var s,a,u,p,c=[],l=[],h=0;h<e.length;h++){var f=e[h],y=f.type;if(y===V||"IVARNAME"===y)Array.isArray(f.value)?c.push.apply(c,t(f.value.map((function(t){return new H(V,t)})).concat(new H("IARRAY",f.value.length)),r,n,o,i)):c.push(f);else if(y===U&&i.hasOwnProperty(f.value))f=new H(V,i[f.value]),c.push(f);else if("IOP2"===y&&c.length>1)a=c.pop(),s=c.pop(),p=n[f.value],f=new H(V,p(s.value,a.value)),c.push(f);else if("IOP3"===y&&c.length>2)u=c.pop(),a=c.pop(),s=c.pop(),"?"===f.value?c.push(s.value?a.value:u.value):(p=o[f.value],f=new H(V,p(s.value,a.value,u.value)),c.push(f));else if("IOP1"===y&&c.length>0)s=c.pop(),p=r[f.value],f=new H(V,p(s.value)),c.push(f);else if(y===$){for(;c.length>0;)l.push(c.shift());l.push(new H($,t(f.value,r,n,o,i)))}else if("IMEMBER"===y&&c.length>0)s=c.pop(),c.push(new H(V,s.value[f.value]));else{for(;c.length>0;)l.push(c.shift());l.push(f)}}for(;c.length>0;)l.push(c.shift());return l}(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,t),this.parser)},rt.prototype.substitute=function(t,e){return e instanceof rt||(e=this.parser.parse(String(e))),new rt(function t(e,r,n){for(var o=[],i=0;i<e.length;i++){var s=e[i],a=s.type;if(a===U&&s.value===r)for(var u=0;u<n.tokens.length;u++){var p,c=n.tokens[u];p="IOP1"===c.type?q(c.value):"IOP2"===c.type?G(c.value):"IOP3"===c.type?W(c.value):new H(c.type,c.value),o.push(p)}else a===$?o.push(new H($,t(s.value,r,n))):o.push(s)}return o}(this.tokens,t,e),this.parser)},rt.prototype.evaluate=function(t){return t=t||{},Y(this.tokens,this,t)},rt.prototype.toString=function(){return J(this.tokens,!1)},rt.prototype.symbols=function(t){t=t||{};var e=[];return et(this.tokens,e,t),e},rt.prototype.variables=function(t){t=t||{};var e=[];et(this.tokens,e,t);var r=this.functions;return e.filter((function(t){return!(t in r)}))},rt.prototype.toJSFunction=function(t,e){var r=this,n=new Function(t,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+J(this.simplify(e).tokens,!0)+"; }");return function(){return n.apply(r,arguments)}};var nt="TOP",ot="TPAREN";function it(t,e,r){this.type=t,this.value=e,this.index=r}function st(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}it.prototype.toString=function(){return this.type+": "+this.value},st.prototype.newToken=function(t,e,r){return new it(t,e,null!=r?r:this.pos)},st.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},st.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},st.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},st.prototype.isString=function(){var t=!1,e=this.pos,r=this.expression.charAt(e);if("'"===r||'"'===r)for(var n=this.expression.indexOf(r,e+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,"\\"!==this.expression.charAt(n-1)){var o=this.expression.substring(e+1,n);this.current=this.newToken("TSTRING",this.unescape(o),e),t=!0;break}n=this.expression.indexOf(r,n+1)}return t},st.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(ot,t),this.pos++,!0)},st.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("["))&&(this.current=this.newToken("TBRACKET",t),this.pos++,!0)},st.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},st.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken("TSEMICOLON",";"),this.pos++,!0)},st.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()&&(e===this.pos||"_"!==r&&"."!==r&&(r<"0"||r>"9")))break}if(e>t){var n=this.expression.substring(t,e);if(n in this.consts)return this.current=this.newToken("TNUMBER",this.consts[n]),this.pos+=n.length,!0}return!1},st.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()&&(e===this.pos||"_"!==r&&(r<"0"||r>"9")))break}if(e>t){var n=this.expression.substring(t,e);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(nt,n),this.pos+=n.length,!0}return!1},st.prototype.isName=function(){for(var t=this.pos,e=t,r=!1;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()){if(e===this.pos&&("$"===n||"_"===n)){"_"===n&&(r=!0);continue}if(e===this.pos||!r||"_"!==n&&(n<"0"||n>"9"))break}else r=!0}if(r){var o=this.expression.substring(t,e);return this.current=this.newToken("TNAME",o),this.pos+=o.length,!0}return!1},st.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var at=/^[0-9a-f]{4}$/i;function ut(t,e,r){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==r.allowMemberAccess}st.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var r=t.substring(0,e);e>=0;){var n=t.charAt(++e);switch(n){case"'":r+="'";break;case'"':r+='"';break;case"\\":r+="\\";break;case"/":r+="/";break;case"b":r+="\b";break;case"f":r+="\f";break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"u":var o=t.substring(e+1,e+5);at.test(o)||this.parseError("Illegal escape sequence: \\u"+o),r+=String.fromCharCode(parseInt(o,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++e;var i=t.indexOf("\\",e);r+=t.substring(e,i<0?t.length:i),e=i}return r},st.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},st.prototype.isRadixInteger=function(){var t,e,r=this.pos;if(r>=this.expression.length-2||"0"!==this.expression.charAt(r))return!1;if(++r,"x"===this.expression.charAt(r))t=16,e=/^[0-9a-f]$/i,++r;else{if("b"!==this.expression.charAt(r))return!1;t=2,e=/^[01]$/i,++r}for(var n=!1,o=r;r<this.expression.length;){var i=this.expression.charAt(r);if(!e.test(i))break;r++,n=!0}return n&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(o,r),t)),this.pos=r),n},st.prototype.isNumber=function(){for(var t,e=!1,r=this.pos,n=r,o=r,i=!1,s=!1;r<this.expression.length&&((t=this.expression.charAt(r))>="0"&&t<="9"||!i&&"."===t);)"."===t?i=!0:s=!0,r++,e=s;if(e&&(o=r),"e"===t||"E"===t){r++;for(var a=!0,u=!1;r<this.expression.length;){if(t=this.expression.charAt(r),!a||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;u=!0,a=!1}else a=!1;r++}u||(r=o)}return e?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(n,r))),this.pos=r):this.pos=o,e},st.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(nt,e);else if("∙"===e||"•"===e)this.current=this.newToken(nt,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(nt,">="),this.pos++):this.current=this.newToken(nt,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(nt,"<="),this.pos++):this.current=this.newToken(nt,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(nt,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(nt,"=="),this.pos++):this.current=this.newToken(nt,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(nt,"!="),this.pos++):this.current=this.newToken(nt,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},st.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},st.prototype.getCoordinates=function(){var t,e=0,r=-1;do{e++,t=this.pos-r,r=this.expression.indexOf("\n",r+1)}while(r>=0&&r<this.pos);return{line:e,column:t}},st.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},ut.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},ut.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?tt(e,t.value):"function"==typeof e?e(t):t.value===e)},ut.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},ut.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},ut.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e))&&(this.next(),!0)},ut.prototype.expect=function(t,e){if(!this.accept(t,e)){var r=this.tokens.getCoordinates();throw new Error("parse error ["+r.line+":"+r.column+"]: Expected "+(e||t))}},ut.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept("TNAME")||this.accept(nt,(function(t){return t.value in e})))t.push(new H(U,this.current.value));else if(this.accept("TNUMBER"))t.push(new H(V,this.current.value));else if(this.accept("TSTRING"))t.push(new H(V,this.current.value));else if(this.accept(ot,"("))this.parseExpression(t),this.expect(ot,")");else{if(!this.accept("TBRACKET","["))throw new Error("unexpected "+this.nextToken);if(this.accept("TBRACKET","]"))t.push(new H("IARRAY",0));else{var r=this.parseArrayList(t);t.push(new H("IARRAY",r))}}},ut.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},ut.prototype.pushExpression=function(t,e){for(var r=0,n=e.length;r<n;r++)t.push(e[r])},ut.prototype.parseUntilEndStatement=function(t,e){return!!this.accept("TSEMICOLON")&&(!this.nextToken||"TEOF"===this.nextToken.type||this.nextToken.type===ot&&")"===this.nextToken.value||e.push(new H("IENDSTATEMENT")),"TEOF"!==this.nextToken.type&&this.parseExpression(e),t.push(new H($,e)),!0)},ut.prototype.parseArrayList=function(t){for(var e=0;!this.accept("TBRACKET","]");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},ut.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(nt,"=");){var e=t.pop(),r=[],n=t.length-1;if("IFUNCALL"!==e.type){if(e.type!==U&&"IMEMBER"!==e.type)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(r),t.push(new H("IVARNAME",e.value)),t.push(new H($,r)),t.push(G("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,i=e.value+1;o<i;o++){var s=n-o;t[s].type===U&&(t[s]=new H("IVARNAME",t[s].value))}this.parseVariableAssignmentExpression(r),t.push(new H($,r)),t.push(new H("IFUNDEF",e.value))}}},ut.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(nt,"?");){var e=[],r=[];this.parseConditionalExpression(e),this.expect(nt,":"),this.parseConditionalExpression(r),t.push(new H($,e)),t.push(new H($,r)),t.push(W("?"))}},ut.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(nt,"or");){var e=[];this.parseAndExpression(e),t.push(new H($,e)),t.push(G("or"))}},ut.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(nt,"and");){var e=[];this.parseComparison(e),t.push(new H($,e)),t.push(G("and"))}};var pt=["==","!=","<","<=",">=",">","in"];ut.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(nt,pt);){var e=this.current;this.parseAddSub(t),t.push(G(e.value))}};var ct=["+","-","||"];ut.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(nt,ct);){var e=this.current;this.parseTerm(t),t.push(G(e.value))}};var lt=["*","/","%"];function ht(t,e){return Number(t)+Number(e)}function ft(t,e){return t-e}function yt(t,e){return t*e}function vt(t,e){return t/e}function bt(t,e){return t%e}function dt(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e}function gt(t,e){return t===e}function mt(t,e){return t!==e}function Ot(t,e){return t>e}function wt(t,e){return t<e}function At(t,e){return t>=e}function xt(t,e){return t<=e}function Et(t,e){return Boolean(t&&e)}function St(t,e){return Boolean(t||e)}function _t(t,e){return tt(e,t)}function jt(t){return(Math.exp(t)-Math.exp(-t))/2}function Mt(t){return(Math.exp(t)+Math.exp(-t))/2}function Tt(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function kt(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function It(t){return Math.log(t+Math.sqrt(t*t-1))}function Pt(t){return Math.log((1+t)/(1-t))/2}function Rt(t){return Math.log(t)*Math.LOG10E}function Nt(t){return-t}function Ct(t){return!t}function zt(t){return t<0?Math.ceil(t):Math.floor(t)}function Ft(t){return Math.random()*(t||1)}function Dt(t){return Lt(t+1)}ut.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(nt,lt);){var e=this.current;this.parseFactor(t),t.push(G(e.value))}},ut.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(nt,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===ot&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if("TSEMICOLON"===this.nextToken.type||"TCOMMA"===this.nextToken.type||"TEOF"===this.nextToken.type||this.nextToken.type===ot&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var r=this.current;this.parseFactor(t),t.push(q(r.value))}else this.parseExponential(t)},ut.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(nt,"^");)this.parseFactor(t),t.push(G("^"))},ut.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(nt,"!");)t.push(q("!"))},ut.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(nt,(function(t){return t.value in e}))){var r=this.current;this.parseAtom(t),t.push(q(r.value))}else for(this.parseMemberExpression(t);this.accept(ot,"(");)if(this.accept(ot,")"))t.push(new H("IFUNCALL",0));else{var n=this.parseArgumentList(t);t.push(new H("IFUNCALL",n))}},ut.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(ot,")");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},ut.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(nt,".")||this.accept("TBRACKET","[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect("TNAME"),t.push(new H("IMEMBER",this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect("TBRACKET","]"),t.push(G("["))}}};var Bt=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Lt(t){var e,r;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var n=t-2,o=t-1;n>1;)o*=n,n--;return 0===o&&(o=1),o}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*Lt(1-t));if(t>=171.35)return 1/0;if(t>85){var i=t*t,s=i*t,a=s*t,u=a*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*i)-139/(51840*s)-571/(2488320*a)+163879/(209018880*u)+5246819/(75246796800*u*t))}--t,r=Bt[0];for(var p=1;p<Bt.length;++p)r+=Bt[p]/(t+p);return e=t+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*r}function Vt(t){return Array.isArray(t)?t.length:String(t).length}function Ut(){for(var t=0,e=0,r=0;r<arguments.length;r++){var n,o=Math.abs(arguments[r]);e<o?(t=t*(n=e/o)*n+1,e=o):t+=o>0?(n=o/e)*n:o}return e===1/0?1/0:e*Math.sqrt(t)}function $t(t,e,r){return t?e:r}function Ht(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))}function qt(t,e,r){return r&&(r[t]=e),e}function Gt(t,e){return t[0|e]}function Wt(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)}function Yt(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)}function Xt(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,r){return t(e,r)}))}function Kt(t,e,r){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(r))throw new Error("Second argument to fold is not an array");return r.reduce((function(e,r,n){return t(e,r,n)}),e)}function Zt(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,r){return t(e,r)}))}function Jt(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)}function Qt(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)}function te(t){return(t>0)-(t<0)||+t}function ee(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function re(t){return Math.exp(t)-1}function ne(t){return Math.log(1+t)}function oe(t){return Math.log(t)/Math.LN2}function ie(t){this.options=t||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||jt,cosh:Math.cosh||Mt,tanh:Math.tanh||Tt,asinh:Math.asinh||kt,acosh:Math.acosh||It,atanh:Math.atanh||Pt,sqrt:Math.sqrt,cbrt:Math.cbrt||ee,log:Math.log,log2:Math.log2||oe,ln:Math.log,lg:Math.log10||Rt,log10:Math.log10||Rt,expm1:Math.expm1||re,log1p:Math.log1p||ne,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||zt,"-":Nt,"+":Number,exp:Math.exp,not:Ct,length:Vt,"!":Dt,sign:Math.sign||te},this.binaryOps={"+":ht,"-":ft,"*":yt,"/":vt,"%":bt,"^":Math.pow,"||":dt,"==":gt,"!=":mt,">":Ot,"<":wt,">=":At,"<=":xt,and:Et,or:St,in:_t,"=":qt,"[":Gt},this.ternaryOps={"?":$t},this.functions={random:Ft,fac:Dt,min:Yt,max:Wt,hypot:Math.hypot||Ut,pyt:Math.hypot||Ut,pow:Math.pow,atan2:Math.atan2,if:$t,gamma:Lt,roundTo:Ht,map:Xt,fold:Kt,filter:Zt,indexOf:Jt,join:Qt},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}ie.prototype.parse=function(t){var e=[],r=new ut(this,new st(this,t),{allowMemberAccess:this.options.allowMemberAccess});return r.parseExpression(e),r.expect("TEOF","EOF"),new rt(e,this)},ie.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var se=new ie;ie.parse=function(t){return se.parse(t)},ie.evaluate=function(t,e){return se.parse(t).evaluate(e)};var ae={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};ie.prototype.isOperatorEnabled=function(t){var e=function(t){return ae.hasOwnProperty(t)?ae[t]:t}(t),r=this.options.operators||{};return!(e in r)||!!r[e]};
/*!
 Based on ndef.parser, by Raphael Graf(r@undefined.ch)
 http://www.undefined.ch/mparser/index.html

 Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)

 You are free to use and modify this code in anyway you find useful. Please leave this comment in the code
 to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,
 but don't feel like you have to let me know or ask permission.
*/
var ue,pe=new ie;function ce(t){try{return pe.evaluate(t),+pe.evaluate(t).toFixed(3)}catch(e){return t}}function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function he(t){return"object"!==le(t)||"object"!==le(t.value)||(null==t?void 0:t.type)!==s.BOX_SHADOW&&(null==t?void 0:t.type)!==s.TYPOGRAPHY?N(t)?t.value.toString():t.toString():t.value}function fe(t,e,r){if("object"===le(r))return r;if(t&&("string"==typeof t||"number"==typeof t)){var n=ce(String(r));return t.replace(e,String(n))}return t}function ye(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=he(t);try{var n=P(r);if(null!=n&&n.length){var o=Array.from(n).map((function(r){if(r.length>1){var n,o;if(o=r.startsWith("{")?r.endsWith("}")?r.slice(1,r.length-1):r.slice(1,r.length):r.substring(1),"object"===le(t)&&o===t.name||o===t)return N(t)?t.value.toString():t.toString();var i=o.split("."),s=i.pop(),a=i.join("."),u=Number(i.pop()),p=i.join("."),c=e.find((function(t){return t.name===o||t.name===a||t.name===p}));if((null==c?void 0:c.name)===o)return ye(c,e);if(s&&(null==c?void 0:c.name)===a&&null!==(n=c.rawValue)&&void 0!==n&&n.hasOwnProperty(s))return ye(null==c?void 0:c.rawValue[s],e);if(void 0!==u&&s&&(null==c?void 0:c.name)===p&&Array.isArray(null==c?void 0:c.rawValue)&&null!=c&&c.rawValue[u]&&null!=c&&c.rawValue[u].hasOwnProperty(s))return ye(null==c?void 0:c.rawValue[u][s],e)}return r}));n.forEach((function(t,e){var n=o[e];r=fe(r,t,n)})),"null"===r&&(r=null)}if(r){var i=P(r);if(!i){var s=ce(r);return"number"==typeof s?s:M(s)}}}catch(r){return console.log("Error getting alias value of ".concat(JSON.stringify(t,null,2)),e),null}return r&&"string"==typeof r?ce(r):r}function ve(t){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t){return!!t&&Boolean(t.toString().match(k))}function de(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ge(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?de(Object(r),!0).forEach((function(e){me(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function me(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return we(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ae(t){return t.filter((function(e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var r=!1;if("string"==typeof t)r=Boolean(t.match(I));else if(t.type===s.TYPOGRAPHY||t.type===s.BOX_SHADOW)if("string"==typeof t.value)r=Boolean(String(t.value).match(I));else{var n=Array.isArray(t.value)?t.value:[t.value];r=n.some((function(t){return Object.values(t).some((function(t){return Boolean(null==t?void 0:t.toString().match(I))}))}))}else r=Boolean(t.value.toString().match(I));if(r){var o=ye(t,e);return null!=o}}catch(r){console.log("Error checking alias of token ".concat("object"===ve(t)?t.name:t),t,e,r)}return!1}(e,t.filter(D))}))}function xe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Ae(t),o=t;return o=t.map((function(t,e,r){var o,i=!1;return t.type===s.TYPOGRAPHY||t.type===s.BOX_SHADOW?"string"==typeof t.value?(o=ye(t.value,r),i=null===o||be(o)):o=Array.isArray(t.value)?t.value.map((function(t){return Object.entries(t).reduce((function(t,e){var n=Oe(e,2),o=n[0],s=n[1];return t[o]=ye(s,r),(null===t[o]||be(t[o]))&&(i=!0),t}),{})})):Object.entries(t.value).reduce((function(t,e){var n=Oe(e,2),o=n[0],s=n[1];return t[o]=ye(s,r),(null===t[o]||be(t[o]))&&(i=!0),t}),{}):(o=ye(t,r),i=null===o||be(o)),ge(ge({},n(t,"failedToResolve")),{},{value:o,rawValue:t.rawValue||t.value},i?{failedToResolve:i}:{})})),r.length>0&&(e>r.length||!e)?xe(o,r.length):o}function Ee(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=Object.entries(e).filter((function(t){var e=Oe(t,2)[1];return e===ue.ENABLED||e===ue.SOURCE})).map((function(t){return Oe(t,1)[0]}));return Object.entries(t).reverse().forEach((function(t){(0===n.length||n.includes(t[0]))&&t[1].forEach((function(e){r.some((function(t){return t.name===e.name}))||r.push(ge(ge({},l(e)),{},{internal__Parent:t[0]}))}))})),r}function Se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _e(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _e(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function je(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Me(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Te(t,e,r){var n=t;if("string"==typeof e&&t.toString()!==e&&(!1===r.resolveReferences&&(n=e),"math"===r.resolveReferences)){("number"==typeof t?/^{[^}]*}$|^\$[^$]*$/:/{[^}]*}|\$[\w.-]*/g).test(e)&&(n=e)}return n}function ke(t,e,r){return Object.entries(t).reduce((function(t,n){var o=je(n,2),i=o[0],s=o[1],a=e[i];return t[i]=Te(s,a,r),t}),{})}function Ie(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Re(t,e,r){return t.reduce((function(t,n){if(r.throwErrorWhenNotResolved&&n.failedToResolve)throw new Error('ERROR: failed to resolve token "'.concat(n.name,'"'));if(n.internal__Parent&&e.includes(n.internal__Parent))return t;var o=t||{},a=l(n);if(delete a.name,!0!==r.resolveReferences&&(a.value=function(t,e){if(void 0===t.rawValue)return t.value;if(t.type===s.TYPOGRAPHY||t.type===s.BOX_SHADOW){if(Array.isArray(t.value)){var r=t.rawValue;return t.value.map((function(t,n){return ke(t,r[n],e)}))}return ke(t.value,t.rawValue,e)}return Te(t.value,t.rawValue,e)}(a,r)),r.preserveRawValue||delete a.rawValue,delete a.internal__Parent,r.expandTypography&&"typography"===a.type||r.expandShadow&&"boxShadow"===a.type){var u=function t(e){return Object.entries(e).reduce((function(e,r){var n=Se(r,2),o=n[0],i=n[1];return e[o]="string"==typeof i||"number"==typeof i?{value:i,type:o}:t(i),e}),{})}(a.value);i()(o,n.name,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(r),!0).forEach((function(e){Pe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},u))}else i()(o,n.name,a);return t}),{})}function Ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ce(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(r),!0).forEach((function(e){ze(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ze(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Be(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Be(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Le(t){var e=t.tokens,r=t.returnValuesOnly,n=void 0!==r&&r,o=t.expandTypography,i=void 0!==o&&o,s=t.expandShadow,a=function t(e){var r,n,o=e.obj,i=e.token,s=e.root,a=void 0===s?null:s,u=e.returnValuesOnly,p=void 0!==u&&u,c=e.expandTypography,l=void 0!==c&&c,h=e.expandShadow,f=void 0!==h&&h,y=!!l&&z(i.value),v=!!f&&L(i.value);if(!N(i)||y||v)if(z(i)&&!l||L(i)&&!f)n={type:i.type,value:Object.entries(i).reduce((function(t,e){var r=De(e,2),n=r[0],o=r[1];return t[n]=N(o)&&p?o.value:o,t}),{})},i.description&&(delete n.value.description,n.description=i.description);else if("object"===Fe(i)){var b=i;N(i)&&(b=i.value),Object.entries(b).map((function(e){var r=De(e,2),n=r[0],i=r[1],s=De(t({obj:o,token:i,root:[a,n].filter((function(t){return t})).join("."),returnValuesOnly:p,expandTypography:l,expandShadow:f}),2)[1];a&&s?o.push(Ce({name:[a,n].join(".")},s)):s&&o.push(Ce({name:n},s))}))}else n={value:i};else n=i;return null!==(r=n)&&void 0!==r&&r.name&&(n.name=n.name.split("/").join(".")),[o,n]}({obj:[],token:e,returnValuesOnly:n,expandTypography:i,expandShadow:void 0!==s&&s}),u=De(a,1)[0];return Object.values(u)}function Ve(t){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ue(t){if(Array.isArray(t))return{global:t};var e=Object.entries(t).reduce((function(t,e){var r=e[1];if(Array.isArray(r))return t.push([e[0],r]),t;if("object"===Ve(r)){var n=Le({tokens:r});return t.push([e[0],n]),t}return t}),[]);return Object.fromEntries(e)}!function(t){t.DISABLED="disabled",t.SOURCE="source",t.ENABLED="enabled"}(ue||(ue={}));e.default=function(t,e,r,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{expandTypography:!1,expandShadow:!1,preserveRawValue:!1,resolveReferences:!0},o=Ue(t),i=Ee(o,Object.fromEntries(e.map((function(t){return[t,ue.ENABLED]})))),s=xe(i),a=Re(s,r,n);return a}(t,e,r,n)}}]);